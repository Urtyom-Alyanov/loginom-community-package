# Репозиторий с пакетированием программы Loginom Community Edition для дистрибютива Arch Linux и пакетного менеджера Nix через Flake

## Как работает?
Делает запрос на страничку скачивания логинома, получение оттуда CSRF токена и версии. Отправка формы на API от имени некого Никиты Никонова Николаевича с Email someone@nixos.org и номером телефона +31 71 452 5670, а еще он студент, соединяем эти данные с данными, полученными от формы на сайте, благодаря этому мы получаем две ссылки (для Linux и для Windows), с которыми можно работать, но они доступны лишь 72 часов, поэтому ссылку раз в 70-72 часа необходимо обновлять, для чего и существует сей репозиторий.

## Предупреждение о Nix и NixOS
На NixOS приложение не работает по непонятным мне причинам (вероятно, чего-то нет в изолированной среде), максимум, чего мне удалось добиться, так это белого окна, говорящего о том, что CEF получает ошибку из-за чего-то (не понятно из-за чего, ибо нормально продебажить нельзя).
Пакетный менеджер Nix на других дистрибутивах работает с этим приложением нормально.

## Что нужно сделать
[x] Все зависимости для Loginom CE внутри PKGBUILD
[] Сделать хоть сколь нибудь работающий экземплр на NixOS

## Установка
## Arch Linux (MAKEPKG)
```sh
git clone https://github.com/Urtyom-Alyanov/loginom-community-package.git
cd loginom-community-package
makepkg -si
```

Если будет не лень, то опубликую в AUR с автоматическим обновлением ссылки или добавлю уже собраный пакет для арча

### Nix Flake (Экспериментально и не работает)

Просто добавьте это в свой `flake.nix`
```nix
{
  inputs = {
    # ... Другие инпуты

    loginom = {
      url = "github:Urtyom-Alyanov/loginom-community-package";
      inputs.nixpkgs.follows = "nixpkgs";
    };
  };

  outputs = { self, nixpkgs, ... } @inputs: { # <- inputs берется отсюда
    # ... То, что должно находится в аутпутах
    # Сам пакет доступен как inputs.loginom.packages.${final.system}.loginom-community, откуда берется inputs указано выше
  };
}
```

#### Альтернативная ссылка для скачивания версии 7.3.0-rc (актуальной на момент написания сего README)
На некоторое время разрабы сайта поломали этот скрипт тем, что на некоторое время открыли скачивание этого ПО без заполнения дурацкой формы, за что им, на самом деле, большое спасибо, но потом они опять его закрыли, чем восстановили работу этого сборщика (жаль, а я уже думал его переписывать, но лан).
Есть вероятность, что эта ссылка будет работать и далее, если так и будет то скрипт будет просто ходить на сайт и проверять версию. Ссылки ниже

[Loginom CE 7.3.0-rc для линукса скачать без регистрации и смс](https://downloads.loginom.com/loginom-community-7.3.0-rc_linux.tar.gz)

[Loginom CE 7.3.0-rc для виндовс скачать без регистрации и смс](https://downloads.loginom.com/LoginomCommunity_7.3.0-rc_windows.zip)

## Лицензия
Сама программа распространяется под проприетарной лицензий, сборщик распространяется под лицензией WTFPL
